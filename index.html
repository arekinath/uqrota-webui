<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!-- UQRota, copyright Alex Wilson 2010 -->
<!-- released under a BSD-style license -->

<html>
<head>
<title>UQRota</title>

<script type="text/javascript" src="js/lib/prototype.js"></script>
<script type="text/javascript" src="js/model.js"></script>
<script type="text/javascript" src="js/datamodel.js"></script>
<script type="text/javascript" src="js/usermodel.js"></script>
<script type="text/javascript">
<!--

document.observe("dom:loaded", function () {
	console.log("testing?");

	API.login('alex', 'testing', function(success) {
		if (success)
			console.log("logged in ok");
		Model.User.get('me', function(me) {
			console.log("my email", me.getEmail());
			console.log("current mobile = ", me.getMobile());
			Model.Semester.get(6160, function (sem) {
				var pb = Model.PlanBox.create({ "user": me, "semester": sem, "title": "Testing" });
				pb.save(function() {
					console.log("saved planbox #", pb.getId());
					
					me.getPlanBoxes.each(function(pb) {
						console.log("I have planbox #", pb.getId());
						pb.destroy(function() {
							console.log("destroyed #", pb.getId());
							
							Model.PlanBox.get(pb.getId(), function(t) {
								console.log("this should be null", t);
							});
						});
					});
				});
			});
		});
	});
});
-->
</script>
</head>
<body>
</body>
</html>
